{"version":3,"file":"render-rule.js","sourceRoot":"","sources":["../../src/utils/render-rule.ts"],"names":[],"mappings":";;AAAA,6CAAsC;AACtC,yCAA6C;AAC7C,qDAAgD;AAGhD,SAAS,cAAc,CACrB,QAAkB,EAClB,YAAmB,EACnB,SAAgB;IAEhB,MAAM,IAAI,GAAG,gBAAU,CACrB,EAAC,CAAC,QAAQ,CAAC,EAAE,YAAY,CAAC,QAAQ,CAAC,EAAC,EACpC,EAAC,CAAC,QAAQ,CAAC,EAAE,SAAS,CAAC,QAAQ,CAAC,EAAC,CAClC,CAAC;IAEF,IAAI,CAAC,IAAI,EAAE;QACT,OAAO;KACR;IAED,OAAO,uBAAS,CAAA;;MAEZ,mBAAQ,CAAC,IAAI,EAAE,EAAC,KAAK,EAAE,KAAK,EAAC,CAAC,CAAC,IAAI,EAAE;;GAExC,CAAC;AACJ,CAAC;AAED,SAAgB,UAAU,CACxB,QAAkB,EAClB,YAAmB,EACnB,SAAgB,EAChB,WAAqB,EAAE;IAEvB,MAAM,IAAI,GAAG,cAAc,CAAC,QAAQ,EAAE,YAAY,EAAE,SAAS,CAAC,CAAC;IAE/D,IAAI,CAAC,IAAI,EAAE;QACT,OAAO;KACR;IAED,MAAM,IAAI,GAAG,IAAI,QAAQ,6CAA6C,QAAQ,IAAI,CAAC;IAEnF,MAAM,IAAI,GAAG,QAAQ;QACnB,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,OAAO,EAAE,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC;QACpD,CAAC,CAAC,EAAE,CAAC;IAEP,OAAO,QAAQ,IAAI,OAAO,IAAI,IAAI,GAAG,IAAI,MAAM,GAAG,IAAI,EAAE,CAAC;AAC3D,CAAC;AAnBD,gCAmBC","sourcesContent":["import {codeBlock} from 'common-tags';\nimport {diff as createDiff} from 'json-diff';\nimport {colorize} from 'json-diff/lib/colorize';\nimport {RuleName, Rules} from '../rules';\n\nfunction renderRuleDiff(\n  ruleName: RuleName,\n  currentRules: Rules,\n  nextRules: Rules\n): string | undefined {\n  const diff = createDiff(\n    {[ruleName]: currentRules[ruleName]},\n    {[ruleName]: nextRules[ruleName]}\n  );\n\n  if (!diff) {\n    return;\n  }\n\n  return codeBlock`\n    \\`\\`\\`diff\n    ${colorize(diff, {color: false}).trim()}\n    \\`\\`\\`\n  `;\n}\n\nexport function renderRule(\n  ruleName: RuleName,\n  currentRules: Rules,\n  nextRules: Rules,\n  comments: string[] = []\n): string | undefined {\n  const diff = renderRuleDiff(ruleName, currentRules, nextRules);\n\n  if (!diff) {\n    return;\n  }\n\n  const link = `[${ruleName}](https://palantir.github.io/tslint/rules/${ruleName}/)`;\n\n  const body = comments\n    ? comments.map(comment => `- ${comment}`).join('\\n')\n    : '';\n\n  return `#### ${link}\\n\\n${body && `${body}\\n\\n`}${diff}`;\n}\n"]}