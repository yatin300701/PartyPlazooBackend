"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const common_tags_1 = require("common-tags");
const json_diff_1 = require("json-diff");
const colorize_1 = require("json-diff/lib/colorize");
function renderRuleDiff(ruleName, currentRules, nextRules) {
    const diff = json_diff_1.diff({ [ruleName]: currentRules[ruleName] }, { [ruleName]: nextRules[ruleName] });
    if (!diff) {
        return;
    }
    return common_tags_1.codeBlock `
    \`\`\`diff
    ${colorize_1.colorize(diff, { color: false }).trim()}
    \`\`\`
  `;
}
function renderRule(ruleName, currentRules, nextRules, comments = []) {
    const diff = renderRuleDiff(ruleName, currentRules, nextRules);
    if (!diff) {
        return;
    }
    const link = `[${ruleName}](https://palantir.github.io/tslint/rules/${ruleName}/)`;
    const body = comments
        ? comments.map(comment => `- ${comment}`).join('\n')
        : '';
    return `#### ${link}\n\n${body && `${body}\n\n`}${diff}`;
}
exports.renderRule = renderRule;
//# sourceMappingURL=render-rule.js.map